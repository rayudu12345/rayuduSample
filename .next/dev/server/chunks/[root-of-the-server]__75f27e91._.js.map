{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/macsho/Rayudu/Projects/sample-login/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nconst EXTERNAL_API_URL = 'https://api-ncrp.mha.gov.in/api/Auth/login';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n\n    // Validate input\n    if (!body.email || !body.password) {\n      return NextResponse.json(\n        { error: 'Email and password are required' },\n        { status: 400 }\n      );\n    }\n\n    console.log(`[Auth] Login attempt for: ${body.email}`);\n\n    const response = await fetch(EXTERNAL_API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      console.error(`[Auth] Login failed for ${body.email}: ${data.message}`);\n      return NextResponse.json(\n        { error: data.message || 'Login failed' },\n        { status: response.status }\n      );\n    }\n\n    console.log(`[Auth] Login successful for: ${body.email}`);\n\n    // Create response with token in cookie\n    const res = NextResponse.json(data, { status: 200 });\n    \n    if (data.token) {\n      res.cookies.set('authToken', data.token, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === 'production',\n        sameSite: 'strict',\n        maxAge: 3600, // 1 hour\n      });\n    }\n\n    return res;\n  } catch (error) {\n    console.error('[Auth] Proxy API error:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,mBAAmB;AAElB,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,iBAAiB;QACjB,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,QAAQ,EAAE;YACjC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,KAAK,EAAE;QAErD,MAAM,WAAW,MAAM,MAAM,kBAAkB;YAC7C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,KAAK,OAAO,EAAE;YACtE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,KAAK,OAAO,IAAI;YAAe,GACxC;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,QAAQ,GAAG,CAAC,CAAC,6BAA6B,EAAE,KAAK,KAAK,EAAE;QAExD,uCAAuC;QACvC,MAAM,MAAM,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;QAElD,IAAI,KAAK,KAAK,EAAE;YACd,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,KAAK,KAAK,EAAE;gBACvC,UAAU;gBACV,QAAQ,oDAAyB;gBACjC,UAAU;gBACV,QAAQ;YACV;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}